# Cline集成指南

本指南详细说明如何在VS Code的Cline中调用MCP Campaign服务器。

## 1. 前提条件

- VS Code已安装
- Cline扩展已安装并配置
- MCP Campaign服务器已启动

## 2. 启动MCP服务器

首先确保MCP服务器正在运行：

```bash
cd /Users/xiongjian/project/Mcp_Campaign
./start.sh
```

服务器将在 `http://localhost:8080` 启动，WebSocket端点位于 `ws://localhost:8080/api/mcp`

## 3. Cline配置

### 3.1 方法一：通过Cline配置文件

在您的用户目录下创建或编辑Cline配置文件：

**macOS/Linux**: `~/.cline/config.json`
**Windows**: `%USERPROFILE%\.cline\config.json`

```json
{
  "mcpServers": {
    "insurance-campaign": {
      "command": "java",
      "args": [
        "-jar",
        "/Users/xiongjian/project/Mcp_Campaign/target/mcp-campaign-server-1.0.0.jar"
      ],
      "env": {
        "SERVER_PORT": "8080"
      }
    }
  }
}
```

### 3.2 方法二：通过VS Code设置

在VS Code中打开设置 (Cmd/Ctrl + ,)，搜索 "cline"，找到MCP服务器配置选项，添加：

```json
{
  "cline.mcpServers": {
    "insurance-campaign": {
      "command": "java",
      "args": [
        "-jar",
        "/Users/xiongjian/project/Mcp_Campaign/target/mcp-campaign-server-1.0.0.jar"
      ],
      "env": {
        "SERVER_PORT": "8080"
      }
    }
  }
}
```

### 3.3 方法三：WebSocket连接（推荐）

如果上述方法不工作，可以使用WebSocket连接：

```json
{
  "mcpServers": {
    "insurance-campaign": {
      "type": "websocket",
      "url": "ws://localhost:8080/api/mcp"
    }
  }
}
```

## 4. 在Cline中使用工具

### 4.1 启动对话

1. 在VS Code中打开Cline面板
2. 开始新的对话
3. Cline将自动检测并加载MCP工具

### 4.2 调用人群定位工具

在Cline对话中，您可以这样请求：

```
请帮我分析一下针对年轻专业人士的人寿保险营销活动的人群定位策略。

具体要求：
- 目标人群：25-35岁的年轻专业人士
- 保险类型：人寿保险
- 营销目标：获取新客户
```

Cline将自动调用 `audience_targeting` 工具并返回详细的人群定位建议。

### 4.3 调用内容推荐工具

请求内容推荐：

```
基于以下人群特征，请推荐适合的营销内容：

人群特征：
- 年龄：25-35岁
- 收入：中等收入到高收入
- 职业：专业人士
- 保险类型：人寿保险
- 营销渠道：邮件
- 活动目标：转化
```

### 4.4 调用Inspector查询工具

对于Claude Inspector相关查询：

```
请使用Inspector工具分析最近的保险营销活动效果，并提供优化建议。
```

## 5. 可用的MCP工具

### 5.1 audience_targeting

**功能**: 提供保险营销活动的人群定位建议

**使用示例**:
```
请使用人群定位工具，分析针对以下需求的目标人群：
- 需求：寻找有车一族购买汽车保险
- 保险类型：汽车保险
- 活动目标：客户获取
```

### 5.2 campaign_content_recommendation

**功能**: 推荐个性化的保险营销内容

**使用示例**:
```
请推荐适合以下场景的营销内容：
- 目标人群：25-35岁年轻专业人士
- 保险类型：健康保险
- 营销渠道：社交媒体
- 活动目标：品牌认知
```

### 5.3 inspector_query

**功能**: 执行Claude Inspector工具查询

**使用示例**:
```
请使用Inspector工具分析我们的保险营销活动的数据表现。
```

## 6. 实际使用场景

### 6.1 营销策略制定

```
我需要制定一个全面的保险营销策略，请帮我：

1. 分析年轻家庭（30-40岁）对健康保险的需求特征
2. 推荐适合的营销渠道和内容
3. 提供活动执行建议
```

### 6.2 内容创作

```
请帮我创作一系列人寿保险的营销内容：

目标受众：中年专业人士（35-50岁）
营销目标：提高品牌认知和产品兴趣
内容类型：邮件营销序列
```

### 6.3 数据分析

```
请分析我们的汽车保险营销活动效果，并提供优化建议：

- 目标人群：新车主（18-30岁）
- 营销渠道：数字广告
- 活动周期：3个月
```

## 7. 高级功能

### 7.1 批量分析

```
请帮我分析多个保险产品的目标人群：

1. 人寿保险 - 年轻专业人士
2. 健康保险 - 中老年群体
3. 汽车保险 - 新车主
4. 财产保险 - 房主

为每个产品提供人群定位和内容推荐建议。
```

### 7.2 竞品分析

```
请帮我分析竞争对手的保险营销策略，并制定我们的差异化策略：

- 主要竞争对手：平安、人保、太保
- 目标市场：一线城市年轻白领
- 产品类型：综合保险套餐
```

### 7.3 个性化推荐

```
基于以下用户画像，请推荐最合适的保险产品和营销内容：

用户画像：
- 年龄：28岁
- 职业：软件工程师
- 收入：年薪30万
- 家庭状况：单身
- 兴趣爱好：健身、旅游
- 风险偏好：中等
```

## 8. 故障排除

### 8.1 常见问题

1. **Cline无法检测到MCP工具**
   - 确认服务器正在运行
   - 检查配置文件路径和格式
   - 重启VS Code

2. **工具调用失败**
   - 检查WebSocket连接
   - 查看服务器日志
   - 确认端口8080未被占用

3. **配置不生效**
   - 检查JSON格式是否正确
   - 确认配置文件路径
   - 重启Cline扩展

### 8.2 调试步骤

1. **验证服务器状态**:
   ```bash
   curl http://localhost:8080/api/campaigns/health
   ```

2. **检查工具列表**:
   ```bash
   curl http://localhost:8080/api/campaigns/tools
   ```

3. **查看Cline日志**:
   - 打开VS Code输出面板
   - 选择"Cline"输出通道
   - 查看详细日志信息

## 9. 最佳实践

### 9.1 提示词优化

1. **明确具体**: 提供详细的背景信息和具体要求
2. **分步执行**: 将复杂任务分解为多个步骤
3. **上下文连贯**: 在对话中保持上下文的一致性

### 9.2 工具使用技巧

1. **先定位后推荐**: 先进行人群定位，再基于结果推荐内容
2. **多渠道测试**: 尝试不同的营销渠道组合
3. **数据驱动**: 基于实际数据调整策略

### 9.3 内容创作建议

1. **个性化**: 根据目标人群特征定制内容
2. **合规性**: 确保所有内容符合保险行业法规
3. **测试优化**: 进行A/B测试以优化效果

## 10. 示例对话

以下是一个完整的使用示例：

**用户**: 我需要为一个新的人寿保险产品制定营销策略，目标人群是25-35岁的年轻专业人士。

**Cline**: 我来帮您分析这个目标人群并制定营销策略。首先让我使用人群定位工具来分析年轻专业人士的特征...

[调用audience_targeting工具]

**Cline**: 基于分析结果，我建议：

1. **人群特征**:
   - 年龄：25-35岁
   - 收入：中等收入到高收入
   - 职业：专业人士、管理人员
   - 沟通偏好：邮件、移动应用、社交媒体

2. **营销策略**:
   - 重点强调财务安全和未来规划
   - 使用数字化渠道进行推广
   - 提供灵活的支付选项

现在让我为您推荐具体的营销内容...

[调用campaign_content_recommendation工具]

**Cline**: 我推荐以下营销内容策略：

1. **主题**: "守护你的未来，从今天开始"
2. **核心信息**: 强调保障家庭财务安全的重要性
3. **渠道建议**: 
   - 邮件营销：详细的产品介绍
   - 社交媒体：简洁有力的价值主张
   - 移动应用：便捷的在线申请流程

4. **个性化元素**:
   - 根据收入水平调整保费展示
   - 基于职业特点定制保障方案
   - 提供在线计算器工具

您希望我进一步细化哪个方面的策略呢？

通过这种方式，您可以在Cline中充分利用MCP Campaign服务器的强大功能，制定更加精准和有效的保险营销策略！
